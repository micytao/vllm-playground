<!-- vLLM-Omni View Template -->
<!-- Loaded dynamically by omni.js -->

<!-- vLLM-Omni Installation Section (collapsible, like Server Logs) -->
<div class="omni-install-section" id="omni-install-section" style="display: none;">
    <div class="omni-install-header" id="omni-install-toggle">
        <div class="omni-install-title">
            <span class="toggle-icon">&#9660;</span>
            <h3>vLLM-Omni Installation</h3>
        </div>
        <span class="install-status-badge not-installed" id="omni-install-badge">Not Installed</span>
    </div>
    <div class="omni-install-content" id="omni-install-content">
        <div class="install-warning-message">
            <p>vLLM-Omni is required for multimodal generation (text-to-image, omni models).</p>
            <p>You can still use <strong>Container mode</strong> without local installation.</p>
        </div>
        <div class="install-instructions">
            <p>To use <strong>Subprocess mode</strong>, install vLLM-Omni in a separate virtual environment:</p>
            <pre><code># Create venv with Python 3.12
uv venv --python 3.12 --seed ~/.venv-vllm-omni
source ~/.venv-vllm-omni/bin/activate

# Install vLLM base
uv pip install vllm==0.12.0 --torch-backend=auto

# Clone and install vLLM-Omni
git clone https://github.com/vllm-project/vllm-omni.git
cd vllm-omni && uv pip install -e .</code></pre>
            <p>Then set the venv path in the Run Mode configuration below.</p>
        </div>
    </div>
</div>

<!-- Main Content Wrapper -->
<div class="omni-content-wrapper" id="omni-content-wrapper">
    <div class="main-content omni-layout">
        <!-- Left: Config Panel -->
        <div class="config-panel resizable" id="omni-config-panel">
            <h2>&#127912; vLLM-Omni Configuration</h2>

            <!-- Availability Status -->
            <div class="omni-availability-status" id="omni-availability-status">
                <span class="status-dot"></span>
                <span class="status-text">Checking...</span>
            </div>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- Section: Model Selection -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="config-section">
                <div class="config-section-header">
                    <span class="section-icon">&#129302;</span>
                    <h3>Model Selection</h3>
                </div>
                <div class="config-section-content">
                    <!-- Model Source Toggle -->
                    <div class="form-group mode-toggle-group">
                        <label>Model Source</label>
                        <div class="mode-toggle-buttons">
                            <label class="mode-button active" id="omni-model-source-hub-label">
                                <input type="radio" name="omni-model-source" id="omni-model-source-hub" value="hub" checked>
                                <span class="mode-button-content"><span class="mode-icon">ü§ó</span><span class="mode-label">HuggingFace</span></span>
                            </label>
                            <label class="mode-button" id="omni-model-source-modelscope-label">
                                <input type="radio" name="omni-model-source" id="omni-model-source-modelscope" value="modelscope">
                                <span class="mode-button-content"><span class="mode-icon">üîÆ</span><span class="mode-label">ModelScope</span></span>
                            </label>
                        </div>
                        <span class="help-text" id="omni-model-source-help">Download models from HuggingFace or ModelScope (China)</span>
                    </div>

                    <div class="form-group">
                        <label>Model Type</label>
                        <select id="omni-model-type">
                            <option value="image">Image Generation</option>
                            <option value="video">Video Generation</option>
                            <option value="audio">Audio Generation (TTS)</option>
                            <option value="omni">Omni (Text + Audio Chat)</option>
                        </select>
                        <span class="help-text" id="omni-model-type-tip">Generate images from text prompts (Text-to-Image)</span>
                    </div>

                    <div class="form-group">
                        <label>Model</label>
                        <select id="omni-model-select">
                            <!-- Populated dynamically based on model type -->
                            <option value="Tongyi-MAI/Z-Image-Turbo">Z-Image Turbo (Fast)</option>
                            <option value="Qwen/Qwen-Image">Qwen Image</option>
                        </select>
                        <!-- Omni Recipes Button -->
                        <button id="omni-browse-recipes-btn" class="btn btn-secondary btn-sm browse-recipes-btn" onclick="window.vllmUI.openOmniRecipesModal()">
                            üìö Browse Recipes
                        </button>
                    </div>

                    <div class="model-id-display" id="omni-model-id-display">
                        <span class="model-id-label" id="omni-model-id-label">Model ID:</span>
                        <code class="model-id-value" id="omni-model-id-value">Tongyi-MAI/Z-Image-Turbo</code>
                    </div>
                </div>
            </div>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- Section: Server Configuration -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="config-section">
                <div class="config-section-header">
                    <span class="section-icon">&#9881;</span>
                    <h3>Server Configuration</h3>
                </div>
                <div class="config-section-content">
                    <div class="form-group mode-toggle-group">
                        <label>Run Mode</label>
                        <div class="mode-toggle-buttons" id="omni-run-mode-toggle">
                            <label class="mode-button active" id="omni-run-mode-subprocess-label">
                                <input type="radio" id="omni-run-mode-subprocess" name="omni-run-mode" value="subprocess" checked>
                                <span>‚ö° Subprocess</span>
                            </label>
                            <label class="mode-button" id="omni-run-mode-container-label">
                                <input type="radio" id="omni-run-mode-container" name="omni-run-mode" value="container">
                                <span>üì¶ Container</span>
                            </label>
                        </div>
                        <small class="form-help" id="omni-run-mode-help">Subprocess requires local vLLM-Omni installation</small>
                    </div>

                    <div class="form-group" id="omni-venv-path-group">
                        <label>vLLM-Omni Venv Path</label>
                        <input type="text" id="omni-venv-path" placeholder="~/.venv-vllm-omni">
                        <span class="help-text">Path to virtual environment with vLLM-Omni installed</span>
                    </div>

                    <div class="form-group">
                        <label>Port</label>
                        <input type="number" id="omni-port" value="8091" min="1024" max="65535">
                        <span class="help-text">Server port (default: 8091)</span>
                    </div>
                </div>
            </div>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- Section: GPU Settings -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="config-section">
                <div class="config-section-header">
                    <span class="section-icon">&#127918;</span>
                    <h3>GPU Settings</h3>
                </div>
                <div class="config-section-content">
                    <div class="form-group">
                        <label>GPU Device</label>
                        <input type="text" id="omni-gpu-device" placeholder="0 (or 0,1 for multi-GPU)">
                        <span class="help-text">CUDA_VISIBLE_DEVICES setting</span>
                    </div>
                    <div class="form-group">
                        <label>GPU Memory Utilization</label>
                        <input type="number" id="omni-gpu-memory" value="0.9" min="0.1" max="1.0" step="0.1">
                        <span class="help-text">Fraction of GPU memory to use (0.1-1.0)</span>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="omni-cpu-offload">
                            <span>Enable CPU Offload</span>
                        </label>
                        <span class="help-text">Reduce GPU memory by offloading to CPU (slower but uses less VRAM)</span>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="omni-torch-compile">
                            <span>Enable torch.compile</span>
                        </label>
                        <span class="help-text">Faster inference but slower startup (2-5 min compilation on first run)</span>
                    </div>
                </div>
            </div>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- Section: Generation Parameters (for image/video models) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="config-section" id="omni-image-params">
                <div class="config-section-header">
                    <span class="section-icon">&#9881;</span>
                    <h3>Generation Parameters</h3>
                </div>
                <div class="config-section-content">
                    <div class="form-group">
                        <label>Image Size</label>
                        <div class="size-inputs">
                            <input type="number" id="omni-width" value="1024" min="256" max="2048" step="64">
                            <span>x</span>
                            <input type="number" id="omni-height" value="1024" min="256" max="2048" step="64">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Inference Steps: <span id="omni-steps-value">6</span></label>
                        <input type="range" id="omni-steps" min="1" max="100" value="6">
                    </div>

                    <div class="form-group">
                        <label>Guidance Scale: <span id="omni-guidance-value">1.0</span></label>
                        <input type="range" id="omni-guidance" min="0" max="20" step="0.5" value="1">
                    </div>
                </div>
            </div>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- Command Preview -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="command-preview-section">
                <div class="command-preview-header">
                    <h3>Command Preview</h3>
                    <div class="command-preview-buttons">
                        <button id="omni-reset-command-btn" class="btn btn-secondary btn-sm" title="Reset to auto-generated command">Reset</button>
                        <button id="omni-copy-command-btn" class="btn btn-secondary btn-sm" title="Copy command">Copy</button>
                    </div>
                </div>
                <textarea id="omni-command-text" class="command-preview-textarea" rows="6" spellcheck="false">vllm-omni serve Tongyi-MAI/Z-Image-Turbo --port 8091</textarea>
                <small class="command-help">Editable for customization. Copy to run manually. "Start Server" uses settings above. Click "Reset" to restore.</small>
            </div>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- Server Controls -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="config-section server-controls-section">
                <div class="button-group">
                    <button id="omni-start-btn" class="btn btn-primary">Start Server</button>
                    <button id="omni-stop-btn" class="btn btn-danger" disabled>Stop Server</button>
                </div>

                <div class="status-indicator" id="omni-server-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Offline</span>
                </div>
            </div>

            <!-- Resize Handle -->
            <div class="resize-handle resize-handle-vertical" id="omni-config-resize-handle" data-direction="horizontal"></div>
        </div>

        <!-- Right: Hybrid Interaction Panel -->
        <div class="interaction-panel" id="omni-interaction-panel">

            <!-- === GENERATION STUDIO (for image/video models) === -->
            <div id="omni-studio-panel" class="panel-mode">
                <!-- Panel Header with dynamic title -->
                <div class="studio-header">
                    <span class="studio-icon" id="omni-studio-icon">&#127912;</span>
                    <span class="studio-title" id="omni-studio-title">Image Generation</span>
                </div>

                <!-- Image Upload Dropzone (for image-to-image, hidden for video) -->
                <div class="image-upload-section" id="omni-image-upload">
                    <div class="dropzone" id="omni-dropzone">
                        <div class="dropzone-content">
                            <span class="dropzone-icon">&#128444;</span>
                            <span class="dropzone-text">Drop image here for image-to-image</span>
                            <span class="dropzone-hint">or click to browse (optional)</span>
                        </div>
                        <input type="file" id="omni-image-input" accept="image/*" hidden>
                    </div>
                    <div class="uploaded-preview" id="omni-uploaded-preview" style="display: none;">
                        <img id="omni-uploaded-image" src="" alt="Uploaded">
                        <button id="omni-clear-upload" class="btn btn-sm">Clear</button>
                    </div>
                </div>

                <!-- Prompt Input -->
                <div class="prompt-section">
                    <div class="prompt-inputs">
                        <textarea id="omni-prompt" placeholder="Describe the image you want to generate..." rows="3"></textarea>
                        <textarea id="omni-negative-prompt" placeholder="Negative prompt (optional)..." rows="2"></textarea>
                    </div>

                    <!-- Video-specific parameters (hidden for image mode) -->
                    <div class="video-params" id="omni-video-params" style="display: none;">
                        <div class="param-group">
                            <label for="omni-video-duration">Duration (sec)</label>
                            <input type="number" id="omni-video-duration" value="4" min="1" max="30" step="1">
                        </div>
                        <div class="param-group">
                            <label for="omni-video-fps">FPS</label>
                            <input type="number" id="omni-video-fps" value="24" min="8" max="60" step="1">
                        </div>
                        <span class="help-text video-tip">Duration and frame rate for video generation</span>
                    </div>

                    <div class="prompt-actions">
                        <div class="seed-input-wrapper">
                            <input type="number" id="omni-seed" placeholder="Seed (optional)" min="0">
                            <span class="help-text seed-tip">Random number for reproducibility. Same seed + prompt = same output.</span>
                        </div>
                        <div class="template-select-wrapper">
                            <label for="omni-prompt-template">Quick Template:</label>
                            <select id="omni-prompt-template">
                                <option value="">-- Select a template --</option>
                                <!-- Options populated dynamically based on model type -->
                            </select>
                        </div>
                        <button id="omni-generate-btn" class="btn btn-primary" disabled>
                            <span id="omni-generate-btn-text">Generate Image</span>
                        </button>
                    </div>
                </div>

                <!-- Generated Content Gallery (dynamic based on mode) -->
                <div class="generation-gallery" id="omni-gallery">
                    <div class="gallery-placeholder" id="omni-gallery-placeholder">
                        <span class="placeholder-icon" id="omni-gallery-icon">&#127912;</span>
                        <span class="placeholder-text" id="omni-gallery-text">Generated images will appear here</span>
                        <span class="placeholder-hint" id="omni-gallery-hint">Start the server and enter a prompt to generate</span>
                    </div>
                    <div class="gallery-content" id="omni-gallery-content" style="display: none;"></div>
                </div>
            </div>

            <!-- === CHAT INTERFACE (for Omni models) === -->
            <div id="omni-chat-panel" class="panel-mode" style="display: none;">
                <div class="panel omni-chat-wrapper">
                    <!-- Panel Header (consistent with vLLM Server) -->
                    <div class="panel-header">
                        <h2>&#128172; Omni Chat</h2>
                        <div class="chat-header-actions">
                            <button id="omni-export-chat-btn" class="btn btn-secondary btn-sm">Export</button>
                            <button id="omni-clear-chat-btn" class="btn btn-secondary btn-sm">Clear</button>
                        </div>
                    </div>

                    <!-- Chat Container (reuse pattern from vLLM Server) -->
                    <div class="chat-container" id="omni-chat-container">
                        <div class="chat-message system">
                            <div class="message-content">
                                <span class="message-text">Chat with Qwen-Omni. Supports text, images, and audio input/output.</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Input Area (consistent with vLLM Server) -->
                    <div class="chat-input-area">
                        <!-- Media Preview (for attached images) -->
                        <div class="chat-media-preview" id="omni-chat-media-preview" style="display: none;">
                            <img id="omni-chat-preview-image" src="" alt="Attached">
                            <button id="omni-chat-clear-media" class="btn btn-sm btn-secondary">Remove</button>
                        </div>

                        <!-- Main Input Group -->
                        <div class="input-group">
                            <button id="omni-attach-image-btn" class="btn btn-secondary btn-icon" title="Attach image">&#128444;</button>
                            <input type="file" id="omni-chat-image-input" accept="image/*" hidden>
                            <textarea id="omni-chat-input" class="chat-input" placeholder="Type your message here..." rows="1"></textarea>
                            <button id="omni-chat-send-btn" class="btn btn-primary" disabled>Send</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Bottom: Server Logs (collapsible, consistent with vLLM Server) -->
    <div class="logs-row" id="omni-logs-row">
        <div class="logs-row-header" id="omni-logs-row-toggle">
            <div class="logs-row-title">
                <span class="logs-toggle-icon">&#9660;</span>
                <h2>&#128203; Server Logs</h2>
            </div>
            <div class="logs-row-controls">
                <label class="auto-scroll-label">
                    <input type="checkbox" id="omni-auto-scroll" checked>
                    <span>Auto-scroll</span>
                </label>
                <button id="omni-save-logs-btn" class="btn btn-secondary btn-sm">Save</button>
                <button id="omni-clear-logs-btn" class="btn btn-secondary btn-sm">Clear</button>
            </div>
        </div>
        <div class="logs-row-content" id="omni-logs-row-content">
            <div id="omni-logs-container" class="logs-container">
                <div class="log-entry info">Waiting for vLLM-Omni server...</div>
            </div>
        </div>
    </div>
</div>

<!-- Omni Recipes Modal -->
<div id="omni-recipes-modal" class="modal omni-recipes-modal" style="display: none;">
    <div class="modal-overlay" id="omni-recipes-modal-overlay" onclick="window.vllmUI.closeOmniRecipesModal()"></div>
    <div class="modal-content omni-recipes-modal-content">
        <div class="modal-header">
            <h2>üìö vLLM-Omni Recipes</h2>
            <button id="omni-recipes-modal-close" class="modal-close" onclick="window.vllmUI.closeOmniRecipesModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p class="recipes-intro">
                Pre-configured settings optimized for different GPU sizes and use cases.
                Select a recipe to auto-configure all settings.
            </p>

            <!-- Recipe Cards -->
            <div class="omni-recipes-container">
                <!-- Image Generation Section -->
                <div class="recipe-section">
                    <h3 class="recipe-section-header">üñºÔ∏è Image Generation</h3>
                    <div class="omni-recipes-grid" id="omni-recipes-grid-image">
                        <!-- Small GPU Recipes -->
                        <div class="omni-recipe-card" data-recipe="small-gpu-turbo">
                    <div class="recipe-badge">Small GPU</div>
                    <h3>üöÄ Z-Image Turbo (16-24GB)</h3>
                    <p>Fast image generation for GPUs with 16-24GB VRAM (L4, RTX 4090, A10)</p>
                    <div class="recipe-specs">
                        <span>Model: Z-Image-Turbo</span>
                        <span>Steps: 6</span>
                        <span>Guidance: 1.0</span>
                        <span>Memory: 85%</span>
                    </div>
                    <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('small-gpu-turbo')">Apply Recipe</button>
                </div>

                <div class="omni-recipe-card" data-recipe="small-gpu-quality">
                    <div class="recipe-badge">Small GPU</div>
                    <h3>üé® Quality Mode (16-24GB)</h3>
                    <p>Higher quality with more steps, still fits in smaller GPUs</p>
                    <div class="recipe-specs">
                        <span>Model: Z-Image-Turbo</span>
                        <span>Steps: 20</span>
                        <span>Guidance: 3.5</span>
                        <span>Memory: 90%</span>
                    </div>
                    <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('small-gpu-quality')">Apply Recipe</button>
                </div>

                <!-- Medium GPU Recipes -->
                <div class="omni-recipe-card" data-recipe="medium-gpu-balanced">
                    <div class="recipe-badge">Medium GPU</div>
                    <h3>‚ö° Balanced (32-48GB)</h3>
                    <p>Good balance of speed and quality for A100-40GB or similar</p>
                    <div class="recipe-specs">
                        <span>Model: Z-Image-Turbo</span>
                        <span>Steps: 12</span>
                        <span>Guidance: 2.5</span>
                        <span>Memory: 80%</span>
                    </div>
                    <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('medium-gpu-balanced')">Apply Recipe</button>
                </div>

                <div class="omni-recipe-card" data-recipe="medium-gpu-hq">
                    <div class="recipe-badge">Medium GPU</div>
                    <h3>‚ú® High Quality (32-48GB)</h3>
                    <p>Maximum quality settings with Qwen Image model</p>
                    <div class="recipe-specs">
                        <span>Model: Qwen-Image</span>
                        <span>Steps: 30</span>
                        <span>Guidance: 4.0</span>
                        <span>Memory: 85%</span>
                    </div>
                    <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('medium-gpu-hq')">Apply Recipe</button>
                </div>

                <!-- Large GPU Recipes -->
                <div class="omni-recipe-card" data-recipe="large-gpu-fast">
                    <div class="recipe-badge">Large GPU</div>
                    <h3>üí® Ultra Fast (80GB+)</h3>
                    <p>Blazing fast generation on A100-80GB or H100</p>
                    <div class="recipe-specs">
                        <span>Model: Z-Image-Turbo</span>
                        <span>Steps: 4</span>
                        <span>Guidance: 0.5</span>
                        <span>Memory: 70%</span>
                    </div>
                    <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('large-gpu-fast')">Apply Recipe</button>
                </div>

                <div class="omni-recipe-card" data-recipe="large-gpu-production">
                    <div class="recipe-badge">Large GPU</div>
                    <h3>üè≠ Production (80GB+)</h3>
                    <p>Production-ready settings with torch.compile enabled</p>
                    <div class="recipe-specs">
                        <span>Model: Qwen-Image</span>
                        <span>Steps: 25</span>
                        <span>Guidance: 4.0</span>
                        <span>torch.compile: On</span>
                    </div>
                    <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('large-gpu-production')">Apply Recipe</button>
                </div>

                <!-- CPU Offload Recipe -->
                <div class="omni-recipe-card" data-recipe="cpu-offload">
                    <div class="recipe-badge">Limited VRAM</div>
                    <h3>üíæ CPU Offload Mode</h3>
                    <p>For GPUs with limited VRAM (8-16GB), uses CPU offloading</p>
                    <div class="recipe-specs">
                        <span>Model: Z-Image-Turbo</span>
                        <span>Steps: 8</span>
                        <span>CPU Offload: On</span>
                        <span>Memory: 70%</span>
                    </div>
                    <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('cpu-offload')">Apply Recipe</button>
                </div>
                    </div>
                </div>

                <!-- Video Generation Section -->
                <div class="recipe-section">
                    <h3 class="recipe-section-header">üé¨ Video Generation</h3>
                    <div class="omni-recipes-grid" id="omni-recipes-grid-video">
                        <div class="omni-recipe-card" data-recipe="video-small-fast">
                            <div class="recipe-badge recipe-badge-video">Video</div>
                            <h3>üé¨ Video 5B Fast (16GB)</h3>
                            <p>Quick video generation with the 5B dense model</p>
                            <div class="recipe-specs">
                                <span>Model: Wan2.2-TI2V-5B</span>
                                <span>Steps: 20</span>
                                <span>4s @ 16fps</span>
                                <span>Memory: 90%</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('video-small-fast')">Apply Recipe</button>
                        </div>

                        <div class="omni-recipe-card" data-recipe="video-medium-balanced">
                            <div class="recipe-badge recipe-badge-video">Video</div>
                            <h3>üé¨ Video 14B Balanced (24GB+)</h3>
                            <p>Balanced quality with 14B MoE architecture</p>
                            <div class="recipe-specs">
                                <span>Model: Wan2.2-T2V-A14B</span>
                                <span>Steps: 30</span>
                                <span>6s @ 24fps</span>
                                <span>Memory: 85%</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('video-medium-balanced')">Apply Recipe</button>
                        </div>

                        <div class="omni-recipe-card" data-recipe="video-large-quality">
                            <div class="recipe-badge recipe-badge-video">Video</div>
                            <h3>üé¨ Video 14B HQ (48GB+)</h3>
                            <p>High quality video with torch.compile optimization</p>
                            <div class="recipe-specs">
                                <span>Model: Wan2.2-T2V-A14B</span>
                                <span>Steps: 50</span>
                                <span>8s @ 24fps</span>
                                <span>torch.compile: On</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('video-large-quality')">Apply Recipe</button>
                        </div>

                        <div class="omni-recipe-card" data-recipe="video-cpu-offload">
                            <div class="recipe-badge recipe-badge-video">Video</div>
                            <h3>üé¨ Video 5B CPU Offload</h3>
                            <p>Video generation with CPU offloading for limited VRAM</p>
                            <div class="recipe-specs">
                                <span>Model: Wan2.2-TI2V-5B</span>
                                <span>Steps: 20</span>
                                <span>4s @ 16fps</span>
                                <span>CPU Offload: On</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('video-cpu-offload')">Apply Recipe</button>
                        </div>
                    </div>
                </div>

                <!-- Audio/TTS Generation Section -->
                <div class="recipe-section">
                    <h3 class="recipe-section-header">üîä Audio / TTS Generation</h3>
                    <div class="omni-recipes-grid" id="omni-recipes-grid-audio">
                        <div class="omni-recipe-card" data-recipe="audio-lightweight">
                            <div class="recipe-badge recipe-badge-audio">TTS</div>
                            <h3>üîä Lightweight TTS (4GB)</h3>
                            <p>Fast text-to-speech on minimal hardware</p>
                            <div class="recipe-specs">
                                <span>Model: Qwen3 TTS Base</span>
                                <span>VRAM: 4GB</span>
                                <span>Speed: 1.0x</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('audio-lightweight')">Apply Recipe</button>
                        </div>

                        <div class="omni-recipe-card" data-recipe="audio-quality">
                            <div class="recipe-badge recipe-badge-audio">TTS</div>
                            <h3>üîä Quality TTS (8GB)</h3>
                            <p>High quality voice synthesis with voice design</p>
                            <div class="recipe-specs">
                                <span>Model: Qwen3 Voice Design</span>
                                <span>VRAM: 8GB</span>
                                <span>Speed: 1.0x</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('audio-quality')">Apply Recipe</button>
                        </div>

                        <div class="omni-recipe-card" data-recipe="audio-custom-voice">
                            <div class="recipe-badge recipe-badge-audio">TTS</div>
                            <h3>üé§ Custom Voice TTS (8GB)</h3>
                            <p>TTS with voice cloning capabilities</p>
                            <div class="recipe-specs">
                                <span>Model: Qwen3 Custom Voice</span>
                                <span>VRAM: 8GB</span>
                                <span>Voice Clone: Yes</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('audio-custom-voice')">Apply Recipe</button>
                        </div>

                        <div class="omni-recipe-card" data-recipe="audio-generation">
                            <div class="recipe-badge recipe-badge-audio">Audio</div>
                            <h3>üéµ Audio Generation (8GB)</h3>
                            <p>Generate music and sound effects from text</p>
                            <div class="recipe-specs">
                                <span>Model: Stable Audio Open</span>
                                <span>VRAM: 8GB</span>
                                <span>Type: Music/SFX</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('audio-generation')">Apply Recipe</button>
                        </div>

                        <div class="omni-recipe-card" data-recipe="audio-cpu-offload">
                            <div class="recipe-badge recipe-badge-audio">TTS</div>
                            <h3>üíæ TTS CPU Offload</h3>
                            <p>Text-to-speech with CPU offloading for limited VRAM</p>
                            <div class="recipe-specs">
                                <span>Model: Qwen3 TTS Base</span>
                                <span>CPU Offload: On</span>
                                <span>Memory: 70%</span>
                            </div>
                            <button class="btn btn-primary btn-sm recipe-apply-btn" onclick="window.vllmUI.applyOmniRecipe('audio-cpu-offload')">Apply Recipe</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Image Lightbox Modal -->
<div id="omni-lightbox" class="omni-lightbox">
    <div class="lightbox-backdrop"></div>
    <div class="lightbox-content">
        <button class="lightbox-close" title="Close">&times;</button>
        <img id="omni-lightbox-image" src="" alt="Generated image">
        <div class="lightbox-info">
            <p id="omni-lightbox-prompt" class="lightbox-prompt"></p>
            <button id="omni-lightbox-download" class="btn btn-primary btn-sm lightbox-download-btn" title="Download">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </button>
        </div>
    </div>
</div>

<!-- Video Lightbox Modal -->
<div id="omni-video-lightbox" class="omni-lightbox omni-video-lightbox">
    <div class="lightbox-backdrop"></div>
    <div class="lightbox-content video-lightbox-content">
        <button class="lightbox-close" title="Close">&times;</button>
        <video id="omni-lightbox-video" controls autoplay loop>
            <source src="" type="video/mp4">
            Your browser does not support video playback.
        </video>
        <div class="lightbox-info">
            <p id="omni-video-lightbox-prompt" class="lightbox-prompt"></p>
            <button id="omni-video-lightbox-download" class="btn btn-primary btn-sm lightbox-download-btn" title="Download">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </button>
        </div>
    </div>
</div>
